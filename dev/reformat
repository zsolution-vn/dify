#!/bin/bash

set -x

# Ensure poetry environment is activated
if ! command -v poetry &> /dev/null; then
    echo "Poetry not found. Please install Poetry first."
    exit 1
fi

# Install linting tools if not already installed
echo "Installing linting tools (Ruff, dotenv-linter ...) ..."
poetry install --only lint

# Run Ruff linter
poetry run ruff check --fix ./api

# Run dotenv-linter
poetry run dotenv-linter ./api/.env.example ./web/.env.example
